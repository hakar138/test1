<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wave Simulator: Teacher-Student Matching</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .role-selection {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
        }
        
        .role-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 250px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .role-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .role-card.teacher {
            border-top: 5px solid #ff7e00;
        }
        
        .role-card.student {
            border-top: 5px solid #00a2ff;
        }
        
        .role-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }
        
        .role-card h2 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        
        .simulator-container {
            display: none;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .panel {
            flex: 1;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .teacher-panel {
            border-top: 5px solid #ff7e00;
        }
        
        .student-panel {
            border-top: 5px solid #00a2ff;
        }
        
        h2 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        h2 i {
            font-size: 1.5rem;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
        }
        
        button {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            background: #4CAF50;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            width: 100%;
            margin-top: 10px;
            font-size: 1rem;
        }
        
        button:hover {
            background: #3e8e41;
        }
        
        .teacher-btn {
            background: #ff7e00;
        }
        
        .teacher-btn:hover {
            background: #e67200;
        }
        
        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .connected {
            background: rgba(76, 175, 80, 0.3);
            color: #aaffaa;
        }
        
        .disconnected {
            background: rgba(175, 76, 76, 0.3);
            color: #ffaaaa;
        }
        
        .canvas-container {
            flex: 2;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
        }
        
        #waveCanvas {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 5px;
            width: 100%;
            height: 300px;
        }
        
        .wave-info {
            margin-top: 15px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .info-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            border-radius: 5px;
            text-align: center;
            flex: 1;
            min-width: 100px;
        }
        
        .info-item span {
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffffaa;
        }
        
        .back-btn {
            background: #6c757d;
            width: auto;
            margin-top: 20px;
        }
        
        .back-btn:hover {
            background: #5a6268;
        }
        
        @media (max-width: 768px) {
            .simulator-container {
                flex-direction: column;
            }
            
            .role-selection {
                flex-direction: column;
                align-items: center;
            }
            
            .panel, .canvas-container {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Wave Simulator: Teacher-Student Matching</h1>
            <p>Select your role to begin the wave simulation experience</p>
        </header>
        
        <div class="role-selection">
            <div class="role-card teacher" id="teacherRole">
                <div class="role-icon">üë®‚Äçüè´</div>
                <h2>Teacher</h2>
                <p>Set wave parameters and create a session for students to join</p>
            </div>
            
            <div class="role-card student" id="studentRole">
                <div class="role-icon">üë®‚Äçüéì</div>
                <h2>Student</h2>
                <p>Join a session and try to match the teacher's wave parameters</p>
            </div>
        </div>
        
        <div class="simulator-container" id="teacherScreen">
            <div class="panel teacher-panel">
                <h2><i>üë®‚Äçüè´</i> Teacher Section</h2>
                <div class="input-group">
                    <label for="teacherWavelength">Wavelength (m)</label>
                    <input type="number" id="teacherWavelength" min="1" max="100" value="40">
                </div>
                <div class="input-group">
                    <label for="teacherFrequency">Frequency (Hz)</label>
                    <input type="number" id="teacherFrequency" min="0.1" max="10" step="0.1" value="1.5">
                </div>
                <div class="input-group">
                    <label for="teacherVelocity">Wave Velocity (m/s)</label>
                    <input type="number" id="teacherVelocity" min="1" max="100" value="60">
                </div>
                <button class="teacher-btn" id="setTeacherWave">Set Wave Parameters</button>
                
                <div class="status disconnected" id="teacherStatus">
                    Waiting for parameters...
                </div>
                
                <button class="back-btn" id="backFromTeacher">Back to Role Selection</button>
            </div>
            
            <div class="canvas-container">
                <h2>Wave Simulation</h2>
                <canvas id="teacherWaveCanvas" width="800" height="300"></canvas>
                
                <div class="wave-info">
                    <div class="info-item">
                        Wavelength: <span id="displayWavelength">40</span> m
                    </div>
                    <div class="info-item">
                        Frequency: <span id="displayFrequency">1.5</span> Hz
                    </div>
                    <div class="info-item">
                        Velocity: <span id="displayVelocity">60</span> m/s
                    </div>
                </div>
            </div>
        </div>
        
        <div class="simulator-container" id="studentScreen">
            <div class="panel student-panel">
                <h2><i>üë®‚Äçüéì</i> Student Section</h2>
                <div class="input-group">
                    <label for="sessionCode">Session Code</label>
                    <input type="text" id="sessionCode" placeholder="Enter session code">
                </div>
                <div class="input-group">
                    <label for="studentWavelength">Wavelength (m)</label>
                    <input type="number" id="studentWavelength" min="1" max="100" value="20">
                </div>
                <div class="input-group">
                    <label for="studentFrequency">Frequency (Hz)</label>
                    <input type="number" id="studentFrequency" min="0.1" max="10" step="0.1" value="2">
                </div>
                <div class="input-group">
                    <label for="studentVelocity">Wave Velocity (m/s)</label>
                    <input type="number" id="studentVelocity" min="1" max="100" value="40">
                </div>
                <button id="checkMatch">Check Match</button>
                
                <div class="status disconnected" id="studentStatus">
                    Not connected
                </div>
                
                <div class="status disconnected" id="matchStatus">
                    Match Status: Waiting for attempt
                </div>
                
                <button class="back-btn" id="backFromStudent">Back to Role Selection</button>
            </div>
            
            <div class="canvas-container">
                <h2>Wave Simulation</h2>
                <canvas id="studentWaveCanvas" width="800" height="300"></canvas>
                
                <div class="wave-info">
                    <div class="info-item">
                        Wavelength: <span id="studentDisplayWavelength">20</span> m
                    </div>
                    <div class="info-item">
                        Frequency: <span id="studentDisplayFrequency">2</span> Hz
                    </div>
                    <div class="info-item">
                        Velocity: <span id="studentDisplayVelocity">40</span> m/s
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get elements
            const roleSelection = document.querySelector('.role-selection');
            const teacherScreen = document.getElementById('teacherScreen');
            const studentScreen = document.getElementById('studentScreen');
            const teacherRole = document.getElementById('teacherRole');
            const studentRole = document.getElementById('studentRole');
            const backFromTeacher = document.getElementById('backFromTeacher');
            const backFromStudent = document.getElementById('backFromStudent');
            
            // Teacher elements
            const teacherWavelength = document.getElementById('teacherWavelength');
            const teacherFrequency = document.getElementById('teacherFrequency');
            const teacherVelocity = document.getElementById('teacherVelocity');
            const setTeacherWave = document.getElementById('setTeacherWave');
            const teacherStatus = document.getElementById('teacherStatus');
            const displayWavelength = document.getElementById('displayWavelength');
            const displayFrequency = document.getElementById('displayFrequency');
            const displayVelocity = document.getElementById('displayVelocity');
            const teacherCanvas = document.getElementById('teacherWaveCanvas');
            const teacherCtx = teacherCanvas.getContext('2d');
            
            // Student elements
            const studentWavelength = document.getElementById('studentWavelength');
            const studentFrequency = document.getElementById('studentFrequency');
            const studentVelocity = document.getElementById('studentVelocity');
            const checkMatch = document.getElementById('checkMatch');
            const studentStatus = document.getElementById('studentStatus');
            const matchStatus = document.getElementById('matchStatus');
            const studentDisplayWavelength = document.getElementById('studentDisplayWavelength');
            const studentDisplayFrequency = document.getElementById('studentDisplayFrequency');
            const studentDisplayVelocity = document.getElementById('studentDisplayVelocity');
            const studentCanvas = document.getElementById('studentWaveCanvas');
            const studentCtx = studentCanvas.getContext('2d');
            const sessionCode = document.getElementById('sessionCode');
            
            // Wave parameters
            let teacherWaveParams = {
                wavelength: 40,
                frequency: 1.5,
                velocity: 60
            };
            
            let studentWaveParams = {
                wavelength: 20,
                frequency: 2,
                velocity: 40
            };
            
            let teacherTime = 0;
            let studentTime = 0;
            let teacherAnimationId;
            let studentAnimationId;
            
            // Event listeners for role selection
            teacherRole.addEventListener('click', function() {
                roleSelection.style.display = 'none';
                teacherScreen.style.display = 'flex';
                resizeCanvas(teacherCanvas);
                animateTeacherWave();
            });
            
            studentRole.addEventListener('click', function() {
                roleSelection.style.display = 'none';
                studentScreen.style.display = 'flex';
                resizeCanvas(studentCanvas);
                animateStudentWave();
                generateSessionCode();
            });
            
            backFromTeacher.addEventListener('click', function() {
                teacherScreen.style.display = 'none';
                roleSelection.style.display = 'flex';
                cancelAnimationFrame(teacherAnimationId);
            });
            
            backFromStudent.addEventListener('click', function() {
                studentScreen.style.display = 'none';
                roleSelection.style.display = 'flex';
                cancelAnimationFrame(studentAnimationId);
            });
            
            // Set up event listeners
            setTeacherWave.addEventListener('click', setTeacherWaveParams);
            checkMatch.addEventListener('click', checkMatchParams);
            
            // Input event listeners for student
            studentWavelength.addEventListener('input', updateStudentWaveParams);
            studentFrequency.addEventListener('input', updateStudentWaveParams);
            studentVelocity.addEventListener('input', updateStudentWaveParams);
            
            function resizeCanvas(canvas) {
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
            }
            
            function generateSessionCode() {
                const code = Math.random().toString(36).substring(2, 8).toUpperCase();
                sessionCode.value = code;
            }
            
            function setTeacherWaveParams() {
                teacherWaveParams.wavelength = parseFloat(teacherWavelength.value);
                teacherWaveParams.frequency = parseFloat(teacherFrequency.value);
                teacherWaveParams.velocity = parseFloat(teacherVelocity.value);
                
                displayWavelength.textContent = teacherWaveParams.wavelength;
                displayFrequency.textContent = teacherWaveParams.frequency;
                displayVelocity.textContent = teacherWaveParams.velocity;
                
                teacherStatus.textContent = "Parameters set! Session: " + sessionCode.value;
                teacherStatus.className = "status connected";
            }
            
            function updateStudentWaveParams() {
                studentWaveParams.wavelength = parseFloat(studentWavelength.value);
                studentWaveParams.frequency = parseFloat(studentFrequency.value);
                studentWaveParams.velocity = parseFloat(studentVelocity.value);
                
                studentDisplayWavelength.textContent = studentWaveParams.wavelength;
                studentDisplayFrequency.textContent = studentWaveParams.frequency;
                studentDisplayVelocity.textContent = studentWaveParams.velocity;
            }
            
            function checkMatchParams() {
                // Check if values match (with a small tolerance for floating point numbers)
                const isMatch = 
                    Math.abs(studentWaveParams.wavelength - teacherWaveParams.wavelength) < 0.01 &&
                    Math.abs(studentWaveParams.frequency - teacherWaveParams.frequency) < 0.01 &&
                    Math.abs(studentWaveParams.velocity - teacherWaveParams.velocity) < 0.01;
                
                if (isMatch) {
                    matchStatus.textContent = "Match Status: Connected!";
                    matchStatus.className = "status connected";
                    studentStatus.textContent = "Match Connected!";
                    studentStatus.className = "status connected";
                } else {
                    matchStatus.textContent = "Match Status: Values don't match!";
                    matchStatus.className = "status disconnected";
                    studentStatus.textContent = "No connection";
                    studentStatus.className = "status disconnected";
                }
            }
            
            function animateTeacherWave() {
                teacherTime += 0.05;
                
                // Clear canvas
                teacherCtx.clearRect(0, 0, teacherCanvas.width, teacherCanvas.height);
                
                // Draw grid
                drawGrid(teacherCtx, teacherCanvas);
                
                // Draw the wave
                drawWave(teacherCtx, teacherCanvas, teacherWaveParams, teacherTime, '#4CAF50');
                
                // Draw labels
                drawLabels(teacherCtx, teacherCanvas, teacherWaveParams);
                
                teacherAnimationId = requestAnimationFrame(animateTeacherWave);
            }
            
            function animateStudentWave() {
                studentTime += 0.05;
                
                // Clear canvas
                studentCtx.clearRect(0, 0, studentCanvas.width, studentCanvas.height);
                
                // Draw grid
                drawGrid(studentCtx, studentCanvas);
                
                // Draw the wave
                drawWave(studentCtx, studentCanvas, studentWaveParams, studentTime, '#00a2ff');
                
                // Draw labels
                drawLabels(studentCtx, studentCanvas, studentWaveParams);
                
                studentAnimationId = requestAnimationFrame(animateStudentWave);
            }
            
            function drawGrid(ctx, canvas) {
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                ctx.lineWidth = 1;
                
                // Draw horizontal grid lines
                for (let y = 0; y < canvas.height; y += 20) {
                    ctx.beginPath();
                    ctx.moveTo(0, y);
                    ctx.lineTo(canvas.width, y);
                    ctx.stroke();
                }
                
                // Draw vertical grid lines
                for (let x = 0; x < canvas.width; x += 20) {
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x, canvas.height);
                    ctx.stroke();
                }
                
                // Draw x-axis
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(0, canvas.height / 2);
                ctx.lineTo(canvas.width, canvas.height / 2);
                ctx.stroke();
            }
            
            function drawWave(ctx, canvas, params, time, color) {
                const amplitude = canvas.height / 4;
                const points = [];
                
                ctx.beginPath();
                ctx.lineWidth = 3;
                ctx.strokeStyle = color;
                
                for (let x = 0; x < canvas.width; x++) {
                    // Scale the x position to match the wavelength
                    const scaleX = (2 * Math.PI * x) / (params.wavelength * 10);
                    
                    // Calculate y position of the wave
                    const y = canvas.height / 2 + amplitude * Math.sin(scaleX - time * params.frequency);
                    
                    if (x === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    
                    points.push({x, y});
                }
                
                ctx.stroke();
                
                // Draw wave particles
                for (let i = 0; i < points.length; i += 10) {
                    const point = points[i];
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 4, 0, Math.PI * 2);
                    ctx.fillStyle = '#FF9800';
                    ctx.fill();
                }
                
                // Draw direction indicator
                ctx.beginPath();
                ctx.moveTo(canvas.width - 20, canvas.height / 2 - 20);
                ctx.lineTo(canvas.width - 10, canvas.height / 2);
                ctx.lineTo(canvas.width - 20, canvas.height / 2 + 20);
                ctx.strokeStyle = '#FF4081';
                ctx.lineWidth = 3;
                ctx.stroke();
            }
            
            function drawLabels(ctx, canvas, params) {
                ctx.font = '14px Arial';
                ctx.fillStyle = 'white';
                ctx.textAlign = 'center';
                
                // Draw wavelength label
                const waveLengthX1 = canvas.width / 2 - params.wavelength * 5;
                const waveLengthX2 = canvas.width / 2 + params.wavelength * 5;
                const waveY = canvas.height / 2 - 100;
                
                ctx.beginPath();
                ctx.moveTo(waveLengthX1, waveY);
                ctx.lineTo(waveLengthX2, waveY);
                ctx.strokeStyle = '#FF4081';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(waveLengthX1, waveY - 10);
                ctx.lineTo(waveLengthX1, waveY + 10);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(waveLengthX2, waveY - 10);
                ctx.lineTo(waveLengthX2, waveY + 10);
                ctx.stroke();
                
                ctx.fillText(`Wavelength: ${params.wavelength} m`, canvas.width / 2, waveY - 15);
                
                // Draw amplitude label
                const ampX = canvas.width / 2 + params.wavelength * 7;
                const ampY1 = canvas.height / 2;
                const ampY2 = canvas.height / 2 - 100;
                
                ctx.beginPath();
                ctx.moveTo(ampX, ampY1);
                ctx.lineTo(ampX, ampY2);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(ampX - 10, ampY1);
                ctx.lineTo(ampX + 10, ampY1);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(ampX - 10, ampY2);
                ctx.lineTo(ampX + 10, ampY2);
                ctx.stroke();
                
                ctx.fillText(`Amplitude`, ampX + 30, (ampY1 + ampY2) / 2);
            }
            
            // Initialize student wave parameters from input values
            updateStudentWaveParams();
            
            // Handle window resize
            window.addEventListener('resize', function() {
                if (teacherScreen.style.display === 'flex') {
                    resizeCanvas(teacherCanvas);
                }
                if (studentScreen.style.display === 'flex') {
                    resizeCanvas(studentCanvas);
                }
            });
        });
    </script>
</body>
</html>
